import{d as ue,C as r,G as L,H as p,ae as Y,af as le,_ as re,r as B,f as k,k as e,P as _,ag as ie,F as V,i as F,p as i,w as d,z as E,a2 as v,n as P,o as A,l as h,y as M}from"./index.673a3d36.js";import{g as de}from"./assets.6445f516.js";import{U as ce}from"./UserAdmin.fe152de4.js";import{a as Ee}from"./index.ba5978b4.js";import{S as c}from"./sweetalert2.8ac2e1c4.js";import{D as me}from"./KTDataTable.b434e745.js";import{L as pe,h as he}from"./moment.66b1708e.js";const ge=ue({name:"kt-widget-11",components:{Datatable:me,Datepicker:pe},props:{widgetClasses:String,UserAdmin_Name:String},setup(){const n=r(""),a=r([""]),z=r(""),I=r(""),R=r(""),y=r({dueDate1:"",dueDate2:"",assign:"",tags:["important","urgent"]}),C=r([{columnName:"No.",columnLabel:"IdRequest"},{columnName:"\u0E23\u0E2B\u0E31\u0E2A\u0E40\u0E08\u0E49\u0E32\u0E2B\u0E19\u0E35\u0E49",columnLabel:"VendorsCode"},{columnName:"\u0E22\u0E2D\u0E14\u0E04\u0E49\u0E32\u0E07\u0E40\u0E1A\u0E34\u0E01",columnLabel:"SumOutstn"},{columnName:"\u0E22\u0E2D\u0E14\u0E17\u0E35\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A",columnLabel:"SumGetRcv"},{columnName:"\u0E22\u0E2D\u0E14\u0E23\u0E27\u0E21",columnLabel:"TotalRequest"},{columnName:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E1A\u0E34\u0E01",columnLabel:"RequestDate"},{columnName:"\u0E1C\u0E39\u0E49\u0E40\u0E1A\u0E34\u0E01",columnLabel:"UserNameReq"},{columnName:"\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14",columnLabel:"actions"}]),g=r([]);ce();const l=r([]),w=r([]),O=r([]),t=r(!0);r({});const f=r({success:!0,data:[]}),N=r(""),x=r(null),G=r(null),U=r("");L(async()=>{await K(),await q()}),L(()=>{});const K=async()=>{try{const o=await p.get("http://localhost:3100/api/getVenderDropdown"),s=o.data;o.data.UserRule_Id==1?N.value=o.data.UserAdmin_VenderCode.trim():N.value=o.data.data[0].VenderCode,s.success&&Array.isArray(s.data)?f.value.data=s.data:console.error("Invalid API response format:",s)}catch(o){console.error("Error making the API request:",o)}};function H(){const o=J(),s={rtl:Q(),todayHighlight:!0,templates:o};$(x.value).datepicker(s),$(G.value).datepicker(s)}function J(){return{leftArrow:'<i class="la la-angle-left"></i>',rightArrow:'<i class="la la-angle-right"></i>'}}function Q(){return!1}const W=async()=>{try{const o={search:S.value,datePick1:y.value.dueDate1,datePick2:y.value.dueDate2},s=await p.post("http://localhost:3100/api/csh_withdrawal_request_sea",o);console.log(s.data["01"])}catch(o){console.error("Error making the API request:",o)}},q=async()=>{t.value=!0;const o={params:{search:S.value,dueDate1:y.value.dueDate1,dueDate2:y.value.dueDate2,selectedCompany:N.value}};try{const s=await p.get("http://localhost:3100/api/csh_withdrawal_request_sea",o);l.value=s.data["01"],w.value=s.data["01"],n.value=T(s.data["03"][0].Budget);const u=s.data["02"].map(m=>({...m,RequestDate:he(m.RequestDate).format("DD-MM-yyyy")}));O.value=u;const b=s.data["02"].reduce((m,D)=>m+(D.TotalRequest||0),0);I.value=T(b),R.value=T(s.data["03"][0].Budget-b),await p.get("http://localhost:3100/api/getProfileApp_By_IdApi").then(m=>{U.value=m.data[0].UserAdmin_Name}).catch(m=>{console.log(m)}),t.value=!1}catch(s){console.error("Error:",s)}},X=o=>{const s=o.order==="asc";o.label&&Ee(l.value,o.label,{reverse:s})},Z=o=>{g.value=o},j=async o=>{await p.get(`http://localhost:3100/api/csh_withdrawal_request_sea_edit/${o}`).then(s=>{const u=s.data.data["01"];u.length>0&&u[0].StatSend==1?c.fire({title:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E44\u0E21\u0E48\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",text:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E16\u0E39\u0E01\u0E2A\u0E48\u0E07\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E23\u0E2D Interface \u0E41\u0E25\u0E49\u0E27",icon:"error",buttonsStyling:!1,confirmButtonText:"Close",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-danger"}}):c.fire({html:`Are you sure to delete?<br>No. ${o}`,icon:"warning",buttonsStyling:!1,showCancelButton:!0,confirmButtonText:"Ok, delete it!",cancelButtonText:"Cancel",customClass:{confirmButton:"btn btn-dark btn-sm",cancelButton:"btn btn-danger btn-sm"}}).then(async function(b,m){b.value?await p.delete(`http://localhost:3100/api/delete_withdrawal_request/${o}`).then(D=>{c.fire({text:D.data.message,icon:"success",buttonsStyling:!1,confirmButtonText:"Ok, got it!",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-primary"}}).then(()=>{q()})}).catch(D=>{c.fire({text:D.response.data.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Try again!",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-danger"}})}):b.dismiss==="cancel"&&g.value})})},S=r(""),ee=()=>{if(l.value.splice(0,l.value.length,...w.value),S.value!==""){let o=[];for(let s=0;s<l.value.length;s++)te(l.value[s],S.value)&&o.push(l.value[s]);l.value.splice(0,l.value.length,...o)}},te=(o,s)=>{for(let u in o)if(!Number.isInteger(o[u])&&typeof o[u]!="object"&&o[u].indexOf(s)!=-1)return!0;return!1},oe=()=>{c.fire({html:"Are you sure ?",icon:"warning",buttonsStyling:!1,showCancelButton:!0,confirmButtonText:"Ok, delete it!",cancelButtonText:"Cancel",customClass:{confirmButton:"btn btn-dark btn-sm",cancelButton:"btn btn-danger btn-sm"}}).then(function(o){if(o.value){let s=[];g.value.forEach(b=>{s.push(b),se(b)}),ne("accounts/list/delete",{list:s})}else o.dismiss==="cancel"&&g.value})},se=o=>{for(let s=0;s<l.value.length;s++)l.value[s].IdRequest===o&&l.value.splice(s,1)},ne=(o,s)=>{Y.setURL(),Y.deleteSelect(o,s).then(u=>{q(),c.fire({text:u.data.message,icon:"success",buttonsStyling:!1,confirmButtonText:"Ok, got it!",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-primary"}})}).catch(u=>{c.fire({text:u.response.data.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Try again!",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-danger"}})})};function T(o){return typeof o!="number"||isNaN(o)?"Invalid Number":o.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function ae(o){const s=parseFloat(o);return isNaN(s)?"":s.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}return{editButton:async o=>{await p.get(`http://localhost:3100/api/csh_withdrawal_request_sea_edit/${o}`).then(s=>{const u=s.data.data["01"];u.length>0&&u[0].StatSend==1?c.fire({title:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E44\u0E21\u0E48\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",text:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E16\u0E39\u0E01\u0E2A\u0E48\u0E07\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E23\u0E2D Interface \u0E41\u0E25\u0E49\u0E27",icon:"error",buttonsStyling:!1,confirmButtonText:"Close",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-danger"}}):le.push(`/csh_withdrawal_request_sea/edit/${o}`)})},targetData:y,loading:t,UserAdminList:l,sort:X,onItemSelect:Z,headerConfig:C,deleteButton:j,getAssetPath:de,search:S,searchItems:ee,selectedIds:g,deleteFewSubscriptions:oe,initDatepickers:H,vendorData:f,selectedCompany:N,searchButtonClicked:W,onDataTable:q,Budget_show:n,forMatNumber:T,forMatNumber_show:ae,SumOutstn_date_1:a,SumOutstn_show_1:z,Sum_Outstn:I,Sum_Total_Outstn:R,Footer:O,print_pdf:async o=>{const s={params:{id:o,user:U.value}};await p.get("http://localhost:3100/api/report_pdf",s).then(u=>{console.log(u.data.filename),window.open(`http://localhost:3100/storage/${u.data.filename}.pdf`)}).catch(u=>{console.log("api/report_pdf: "+u.message)})},Mapping_DB:async o=>{try{const s={id:o,user:U.value},u=await p.post("http://localhost:3100/api/Mapping_DB",s);console.log(u),u.data.success?c.fire({title:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",icon:"success",buttonsStyling:!1,confirmButtonText:"OK",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-primary"}}).then(()=>{}):c.fire({title:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E44\u0E21\u0E48\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",text:u.data.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Close",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-danger"}})}catch(s){console.error("Error making the API request:",s)}}}}}),fe={class:"p-10 col-lg-12 col-md-12 col-sm-12"},be=e("hr",null,null,-1),_e={class:"card-title"},ve={class:"row"},ye=e("div",{class:"col-12 col-lg-2"},[e("label",{class:"fs-5 fw-semibold pt-5 min-w-150px"},"\u0E1A\u0E23\u0E34\u0E29\u0E31\u0E17\u0E40\u0E08\u0E49\u0E32\u0E2B\u0E19\u0E35\u0E49 : ")],-1),we={class:"col-12 col-lg-4 text-start pt-2"},Se=e("option",{value:""},"\u0E40\u0E25\u0E37\u0E2D\u0E01",-1),De=["value"],Be={class:"col-12 col-lg-4 pt-5"},ke={class:"row"},Ae=e("div",{class:"col-2 col-lg-2"},[e("label",{class:"fs-5 fw-semibold pt-2 min-w-150px"},"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E02\u0E2D\u0E40\u0E1A\u0E34\u0E01 : ")],-1),Ce={class:"col-10 col-lg-10"},Oe={class:"col-12 col-lg-2 text-end"},Ne={class:"card-header border-0 pt-6"},qe={class:"card-title"},Te={class:"d-flex align-items-center position-relative my-1"},Ie={class:"card-toolbar"},Re={class:"card-body py-3"},Ue={class:"badge badge-light"},Ve=["onClick"],Me=["onClick"],ze=["onClick"],Le=["onClick"],$e={class:"card-body py-3"},Ye={width:"100%"},Fe={width:"50%",valign:"top",align:"center"},Pe=e("br",null,null,-1),xe={style:{"border-collapse":"collapse",display:"table"},border:"1",bordercolor:"#767777",width:"80%"},Ge=e("td",{align:"center",width:"60%"},[e("b",null,"\u0E27\u0E07\u0E40\u0E07\u0E34\u0E19")],-1),Ke={align:"center",width:"40%"},He=e("br",null,null,-1),Je={style:{"border-collapse":"collapse",display:"table"},border:"1",bordercolor:"#767777",width:"80%"},Qe=e("tr",null,[e("td",{align:"center",colspan:"3"},[e("b",null,"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E40\u0E1A\u0E34\u0E01\u0E04\u0E07\u0E04\u0E49\u0E32\u0E07")])],-1),We=e("tr",null,[e("td",{align:"center",width:"60%"},[e("b",null,"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23")]),e("td",{align:"center",width:"40%"},[e("b",null,"\u0E08\u0E33\u0E19\u0E27\u0E19\u0E40\u0E07\u0E34\u0E19")])],-1),Xe={align:"center"},Ze=["value"],je={align:"center"},et=["value"],tt=["value"],ot=e("td",{align:"center"},[e("b",null,"\u0E23\u0E27\u0E21")],-1),st={align:"center"},nt={hieght:"50"},at=e("td",{align:"center"},[e("b",null,"\u0E04\u0E07\u0E40\u0E2B\u0E25\u0E37\u0E2D"),e("br"),E("(\u0E27\u0E07\u0E40\u0E07\u0E34\u0E19 - \u0E22\u0E2D\u0E14\u0E23\u0E27\u0E21\u0E40\u0E1A\u0E34\u0E01)")],-1),ut={align:"center"},lt=e("td",{width:"50%",align:"center"},null,-1);function rt(n,a,z,I,R,y){const C=B("el-date-picker"),g=B("el-form-item"),l=B("KTIcon"),w=B("router-link"),O=B("Datatable");return A(),k(V,null,[e("div",{class:P([n.widgetClasses,"card"])},[e("div",fe,[be,e("div",_e,[e("div",ve,[ye,e("div",we,[_(e("select",{id:"companySelect",class:"form-control selectpicker","onUpdate:modelValue":a[0]||(a[0]=t=>n.selectedCompany=t)},[Se,(A(!0),k(V,null,F(n.vendorData.data,t=>(A(),k("option",{value:t.VenderCode,key:t.VenderCode},h(t.VenderName),9,De))),128))],512),[[ie,n.selectedCompany]])]),e("div",Be,[e("div",ke,[Ae,e("div",Ce,[i(g,{prop:"datePick",class:"ps-2"},{default:d(()=>[i(C,{modelValue:n.targetData.dueDate1,"onUpdate:modelValue":a[1]||(a[1]=t=>n.targetData.dueDate1=t),type:"date",placeholder:"Select a date",teleported:!1,"popper-class":"override-styles",name:"dueDate1","value-format":"YYYY-MM-DD",format:"DD-MM-YYYY"},null,8,["modelValue"])]),_:1}),i(g,{prop:"datePick",class:"ps-2"},{default:d(()=>[i(C,{modelValue:n.targetData.dueDate2,"onUpdate:modelValue":a[2]||(a[2]=t=>n.targetData.dueDate2=t),type:"date",placeholder:"Select a date",teleported:!1,"popper-class":"override-styles",name:"dueDate2","value-format":"YYYY-MM-DD",format:"DD-MM-YYYY"},null,8,["modelValue"])]),_:1})])])]),e("div",Oe,[e("button",{class:"btn btn-success",onClick:a[3]||(a[3]=(...t)=>n.onDataTable&&n.onDataTable(...t))},[i(l,{"icon-name":"","icon-class":"fs-2"}),E(" Search ")])])])])]),e("div",Ne,[e("div",qe,[e("div",Te,[i(l,{"icon-name":"magnifier","icon-class":"fs-1 position-absolute ms-6"}),_(e("input",{type:"text","onUpdate:modelValue":a[4]||(a[4]=t=>n.search=t),onInput:a[5]||(a[5]=t=>n.searchItems()),class:"form-control form-control-solid w-250px ps-15",placeholder:"Search"},null,544),[[v,n.search]])])]),e("div",Ie,[i(w,{to:"add",class:"btn btn-primary"},{default:d(()=>[i(l,{"icon-name":"plus","icon-class":"fs-2"}),E(" Add ")]),_:1})])]),e("div",Re,[i(O,{onOnSort:n.sort,onOnItemsSelect:n.onItemSelect,loading:n.loading,data:n.UserAdminList,header:n.headerConfig,"enable-items-per-page-dropdown":!0,"checkbox-enabled":!1,"checkbox-label":"UserAdmin_Id"},{IdRequest:d(({row:t})=>[e("div",Ue,h(t.IdRequest),1)]),VendorsCode:d(({row:t})=>[E(h(t.VendorsCode),1)]),SumOutstn:d(({row:t})=>[E(h(n.forMatNumber_show(t.SumOutstn)),1)]),SumGetRcv:d(({row:t})=>[E(h(n.forMatNumber_show(t.SumGetRcv)),1)]),TotalRequest:d(({row:t})=>[E(h(n.forMatNumber_show(t.TotalRequest)),1)]),RequestDate:d(({row:t})=>[E(h(t.RequestDate),1)]),UserNameReq:d(({row:t})=>[E(h(t.UserNameReq),1)]),actions:d(({row:t})=>[i(w,{to:"update/"+t.IdRequest,class:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-0"},{default:d(()=>[i(l,{"icon-name":"arrows-circle","icon-class":"fs-3"})]),_:2},1032,["to"]),e("a",{onClick:f=>n.editButton(t.IdRequest),class:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-0",style:M(t.StatSend==1?"pointer-events: none;":"")},[i(l,{"icon-name":"pencil","icon-class":"fs-3"})],12,Ve),e("a",{onClick:f=>n.print_pdf(t.IdRequest),class:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-0"},[i(l,{"icon-name":"printer","icon-class":"fs-3"})],8,Me),e("a",{onClick:f=>n.Mapping_DB(t.IdRequest),class:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-0",style:M(t.StatSend==1?"pointer-events: none;":"")},[i(l,{"icon-name":"shield-tick","icon-class":"fs-3"})],12,ze),e("a",{onClick:f=>n.deleteButton(t.IdRequest),class:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-0",style:M(t.StatSend==1?"pointer-events: none;":"")},[i(l,{"icon-name":"trash","icon-class":"fs-3"})],12,Le)]),_:1},8,["onOnSort","onOnItemsSelect","loading","data","header"])])],2),e("div",{class:P([n.widgetClasses,"card"])},[e("div",$e,[e("table",Ye,[e("tr",null,[e("td",Fe,[Pe,e("table",xe,[e("tr",null,[Ge,e("td",Ke,[_(e("input",{"onUpdate:modelValue":a[6]||(a[6]=t=>n.Budget_show=t),class:"inputNumber",type:"text",id:"Budget_show",name:"Budget_show",size:"8",style:{"background-color":"#eeeeee",border:"0px","font-size":"12",color:"green"},readonly:""},null,512),[[v,n.Budget_show]]),_(e("input",{"onUpdate:modelValue":a[7]||(a[7]=t=>n.Budget_show=t),class:"inputNumber",type:"hidden",id:"Budget",name:"Budget",size:"8",style:{"background-color":"#eeeeee",border:"0px","font-size":"12",color:"green"},readonly:""},null,512),[[v,n.Budget_show]])])])]),He,e("table",Je,[Qe,We,e("tbody",null,[(A(!0),k(V,null,F(n.Footer,(t,f)=>(A(),k("tr",{key:f},[e("td",Xe,[E(h("\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48 "+t.RequestDate)+" ",1),e("input",{value:t.RequestDate,class:"inputNumber",type:"hidden",id:"SumOutstn_date_1",name:"SumOutstn_date_1"},null,8,Ze)]),e("td",je,[e("input",{value:n.forMatNumber(t.SumOutstn),class:"inputNumber",type:"text",id:"SumOutstn_show_1",name:"SumOutstn_show_1",size:"8",style:{"background-color":"#eeeeee",border:"0px","font-size":"12",color:"orange"},readonly:""},null,8,et),e("input",{value:t.SumOutstn,class:"inputNumber",type:"hidden",id:"SumOutstn_1",name:"SumOutstn_1",size:"8",style:{"background-color":"#eeeeee",border:"0px","font-size":"12",color:"orange"},readonly:""},null,8,tt)])]))),128))]),e("tr",null,[ot,e("td",st,[_(e("input",{"onUpdate:modelValue":a[8]||(a[8]=t=>n.Sum_Outstn=t),class:"inputNumber",type:"text",id:"Sum_show_Outstn",name:"Sum_show_Outstn",size:"8",style:{"background-color":"#eeeeee",border:"0px","font-size":"12"},readonly:""},null,512),[[v,n.Sum_Outstn]]),_(e("input",{"onUpdate:modelValue":a[9]||(a[9]=t=>n.Sum_Outstn=t),class:"inputNumber",type:"hidden",id:"Sum_Outstn",name:"Sum_Outstn",size:"8",style:{"background-color":"#eeeeee",border:"0px","font-size":"12"},readonly:""},null,512),[[v,n.Sum_Outstn]])])]),e("tr",nt,[at,e("td",ut,[_(e("input",{"onUpdate:modelValue":a[10]||(a[10]=t=>n.Sum_Total_Outstn=t),class:"inputNumber",type:"text",id:"Sum_Total_show_Outstn",name:"Sum_Total_show_Outstn",size:"8",style:{"background-color":"#eeeeee",border:"0px","font-size":"12"},readonly:""},null,512),[[v,n.Sum_Total_Outstn]]),_(e("input",{"onUpdate:modelValue":a[11]||(a[11]=t=>n.Sum_Total_Outstn=t),class:"inputNumber",type:"hidden",id:"Sum_Total_Outstn",name:"Sum_Total_Outstn",size:"8",style:{"background-color":"#eeeeee",border:"0px","font-size":"12"},readonly:""},null,512),[[v,n.Sum_Total_Outstn]])])])])]),lt])])])],2)],64)}const _t=re(ge,[["render",rt]]);export{_t as default};
